name: ae-poc-identity
services:
  identity-mcp:
    image: identity-mcp:v2.0.8
    container_name: ae-poc-identity-mcp-srvsse
    build:
      context: .
      dockerfile: ae-poc-identity-mcp-srvsse/Dockerfile
    ports:
      - "8080:8080" # Map host 8080 to container 8080
      - "9007:9007" # Health checks
    environment:
      - ASPNETCORE_ENVIRONMENT=Production
      - Authentication__ExpectedToken=YOUR_SUPER_SECRET_AND_UNIQUE_TOKEN_REPLACE_ME
      - IdentityStorageApi__ApiUrl=http://host.docker.internal:5023
    restart: unless-stopped
    extra_hosts:
      - "host.docker.internal:host-gateway" # Allow access to host services
